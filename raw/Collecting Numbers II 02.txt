#include <iostream>
#include <vector>
#include <utility>
#include <algorithm>
#include <array>
#include <span>

int main() {
    std::cin.tie(nullptr)->sync_with_stdio(false);

    int n, m;
    std::cin >> n >> m;
    std::vector<int> xs(1), order(n + 2);
    for (int i = 1; i <= n; ++i) {
        int x;
        std::cin >> x;
        xs.push_back(x);
        order[x] = i;
    }

    auto count = 0;
    for (auto p = 0; const auto q : order) {
        if (std::exchange(p, q) > q) {
            ++count;
        }
    }

    for (int a, b; std::cin >> a >> b; std::cout << count << "\n") {
        auto &x = xs[a], &y = xs[b];
        const auto zs = [x, y] {
            static std::array<int, 4> zs;
            auto Z = zs.begin();
            *Z++ = x - 1;
            *Z++ = x;
            if (x != y) {
                if (x != y - 1) {
                    *Z++ = y - 1;
                }
                if (y != x - 1){
                    *Z++ = y;
                }
            }
            return std::span(zs.begin(), Z);
        }();
        for (const auto z : zs) {
            if (order[z] > order[z + 1]) {
                --count;
            }
        }
        std::swap(order[x], order[y]);
        for (const auto z : zs) {
            if (order[z] > order[z + 1]) {
                ++count;
            }
        }
        std::swap(x, y);
    }
}